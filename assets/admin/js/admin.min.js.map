{
  "version": 3,
  "sources": ["admin.js"],
  "sourcesContent": ["/**\n * Extends confirm dialog with bootbox checkbox for deleting\n * asset file with asset.\n */\nSkeleton.deleteFilesWithAssets = function () {\n    var _confirm = yii.confirm;\n    yii.confirm = function (message, ok, cancel) {\n\n        var $link = $(this),\n            deleteUrl = $link.data('delete-url');\n\n        if (!deleteUrl) {\n            return $.proxy(_confirm, $link, message, ok, cancel)();\n        }\n\n        bootbox.prompt({\n            title: message,\n            inputType: 'checkbox',\n            inputOptions: [{\n                text: $link.data('delete-message'),\n                value: 1\n            }],\n            callback: function (result) {\n                if (result !== null) {\n                    $.post(result.length ? $link.data('delete-url') : $link.attr('href'), function () {\n                        $link.closest('tr').remove();\n                    });\n                }\n            }\n        })\n    };\n};\n\nSkeleton.mediaFileImport = function () {\n    var _ = this;\n\n    $('.btn-import').on('click', function () {\n        var $btn = $(this),\n            url = $btn.data('url');\n\n        bootbox.prompt({\n            title: $btn.data('title'),\n            inputType: 'text',\n            placeholder: $btn.data('placeholder'),\n            buttons: {\n                confirm: {\n                    label: $btn.data('confirm')\n                }\n            },\n            callback: function (result) {\n                if (result !== null && result.length && url) {\n                    $.ajax({\n                        url: url,\n                        data: {url: result},\n                        method: 'post',\n                        success: function () {\n                            var $files = $('#files');\n\n                            if ($files.length) {\n                                _.replaceWithAjax('#files');\n                            } else {\n                                location.reload();\n                            }\n                        }\n                    });\n                }\n            }\n        });\n    });\n};\n\n/**\n * Registers image crop on active form element.\n * This only works if the JQueryCropperAsset is registered first.\n */\nSkeleton.registerImageCrop = function () {\n    //noinspection JSUnresolvedFunction\n    var $image = $('#image'),\n        fields = ['width', 'height', 'x', 'y'],\n        $showOnCropEnd = $('.show-on-crop-end'),\n        $imageClearBtn = $('#image-clear'),\n        $ratioSelect = $('#image-ratio'),\n        cropper;\n\n    function init(ratio) {\n        if (cropper) {\n            cropper.destroy();\n        }\n\n        cropper = new Cropper($image[0], {\n            autoCrop: false,\n            guides: false,\n            minContainerHeight: 1,\n            minContainerWidth: 1,\n            modal: false,\n            movable: false,\n            rotatable: false,\n            scalable: false,\n            viewMode: 3,\n            zoomable: false,\n            aspectRatio: ratio,\n            cropend: function () {\n                var data = cropper.getData(true);\n\n                fields.forEach(function (field) {\n                    $('#image-' + field).val(data[field]);\n                });\n\n                $showOnCropEnd.show();\n            }\n        })\n    }\n\n    function reset() {\n        fields.forEach(function (field) {\n            $('#image-' + field).val('');\n        });\n\n        cropper.clear();\n    }\n\n    $imageClearBtn.click(function () {\n        reset();\n        $showOnCropEnd.hide();\n    });\n\n    $ratioSelect.change(function () {\n        init($(this).find('option:selected').val());\n        reset();\n    });\n\n    init();\n};"],
  "mappings": "AAIA,SAAS,sBAAwB,UAAY,CACzC,IAAIA,EAAW,IAAI,QACnB,IAAI,QAAU,SAAUC,EAASC,EAAIC,EAAQ,CAEzC,IAAIC,EAAQ,EAAE,IAAI,EACdC,EAAYD,EAAM,KAAK,YAAY,EAEvC,GAAI,CAACC,EACD,OAAO,EAAE,MAAML,EAAUI,EAAOH,EAASC,EAAIC,CAAM,EAAE,EAGzD,QAAQ,OAAO,CACX,MAAOF,EACP,UAAW,WACX,aAAc,CAAC,CACX,KAAMG,EAAM,KAAK,gBAAgB,EACjC,MAAO,CACX,CAAC,EACD,SAAU,SAAUE,EAAQ,CACpBA,IAAW,MACX,EAAE,KAAKA,EAAO,OAASF,EAAM,KAAK,YAAY,EAAIA,EAAM,KAAK,MAAM,EAAG,UAAY,CAC9EA,EAAM,QAAQ,IAAI,EAAE,OAAO,CAC/B,CAAC,CAET,CACJ,CAAC,CACL,CACJ,EAEA,SAAS,gBAAkB,UAAY,CACnC,IAAIG,EAAI,KAER,EAAE,aAAa,EAAE,GAAG,QAAS,UAAY,CACrC,IAAIC,EAAO,EAAE,IAAI,EACbC,EAAMD,EAAK,KAAK,KAAK,EAEzB,QAAQ,OAAO,CACX,MAAOA,EAAK,KAAK,OAAO,EACxB,UAAW,OACX,YAAaA,EAAK,KAAK,aAAa,EACpC,QAAS,CACL,QAAS,CACL,MAAOA,EAAK,KAAK,SAAS,CAC9B,CACJ,EACA,SAAU,SAAUF,EAAQ,CACpBA,IAAW,MAAQA,EAAO,QAAUG,GACpC,EAAE,KAAK,CACH,IAAKA,EACL,KAAM,CAAC,IAAKH,CAAM,EAClB,OAAQ,OACR,QAAS,UAAY,CACjB,IAAII,EAAS,EAAE,QAAQ,EAEnBA,EAAO,OACPH,EAAE,gBAAgB,QAAQ,EAE1B,SAAS,OAAO,CAExB,CACJ,CAAC,CAET,CACJ,CAAC,CACL,CAAC,CACL,EAMA,SAAS,kBAAoB,UAAY,CAErC,IAAII,EAAS,EAAE,QAAQ,EACnBC,EAAS,CAAC,QAAS,SAAU,IAAK,GAAG,EACrCC,EAAiB,EAAE,mBAAmB,EACtCC,EAAiB,EAAE,cAAc,EACjCC,EAAe,EAAE,cAAc,EAC/BC,EAEJ,SAASC,EAAKC,EAAO,CACbF,GACAA,EAAQ,QAAQ,EAGpBA,EAAU,IAAI,QAAQL,EAAO,CAAC,EAAG,CAC7B,SAAU,GACV,OAAQ,GACR,mBAAoB,EACpB,kBAAmB,EACnB,MAAO,GACP,QAAS,GACT,UAAW,GACX,SAAU,GACV,SAAU,EACV,SAAU,GACV,YAAaO,EACb,QAAS,UAAY,CACjB,IAAIC,EAAOH,EAAQ,QAAQ,EAAI,EAE/BJ,EAAO,QAAQ,SAAUQ,EAAO,CAC5B,EAAE,UAAYA,CAAK,EAAE,IAAID,EAAKC,CAAK,CAAC,CACxC,CAAC,EAEDP,EAAe,KAAK,CACxB,CACJ,CAAC,CACL,CAEA,SAASQ,GAAQ,CACbT,EAAO,QAAQ,SAAUQ,EAAO,CAC5B,EAAE,UAAYA,CAAK,EAAE,IAAI,EAAE,CAC/B,CAAC,EAEDJ,EAAQ,MAAM,CAClB,CAEAF,EAAe,MAAM,UAAY,CAC7BO,EAAM,EACNR,EAAe,KAAK,CACxB,CAAC,EAEDE,EAAa,OAAO,UAAY,CAC5BE,EAAK,EAAE,IAAI,EAAE,KAAK,iBAAiB,EAAE,IAAI,CAAC,EAC1CI,EAAM,CACV,CAAC,EAEDJ,EAAK,CACT",
  "names": ["_confirm", "message", "ok", "cancel", "$link", "deleteUrl", "result", "_", "$btn", "url", "$files", "$image", "fields", "$showOnCropEnd", "$imageClearBtn", "$ratioSelect", "cropper", "init", "ratio", "data", "field", "reset"]
}
